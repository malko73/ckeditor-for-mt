(function(){CKEDITOR.plugins.add('image',{requires:['dialog'],init:function(c){var d='image';CKEDITOR.dialog.add(d,this.path+'dialogs/image.js');c.addCommand(d,new CKEDITOR.dialogCommand(d));c.ui.addButton('Image',{label:c.lang.common.image,command:d});c.on('doubleclick',function(e){var f=e.data.element;if(f.is('img')&&!f.data('cke-realelement')&&!f.isReadOnly())e.data.dialog='image';});if(c.addMenuItems)c.addMenuItems({image:{label:c.lang.image.menu,command:'image',group:'image'}});if(c.contextMenu)c.contextMenu.addListener(function(e,f){if(a(c,e))return{image:CKEDITOR.TRISTATE_OFF};});},afterInit:function(c){d('left');d('right');d('center');d('block');function d(e){var f=c.getCommand('justify'+e);if(f){if(e=='left'||e=='right')f.on('exec',function(g){var h=a(c),i;if(h){i=b(h);if(i==e){h.removeStyle('float');if(e==b(h))h.removeAttribute('align');}else h.setStyle('float',e);g.cancel();}});f.on('refresh',function(g){var h=a(c),i;if(h){i=b(h);this.setState(i==e?CKEDITOR.TRISTATE_ON:e=='right'||e=='left'?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);g.cancel();}});}};}});function a(c,d){if(!d){var e=c.getSelection();d=e.getType()==CKEDITOR.SELECTION_ELEMENT&&e.getSelectedElement();}if(d&&d.is('img')&&!d.data('cke-realelement')&&!d.isReadOnly())return d;};function b(c){var d=c.getStyle('float');if(d=='inherit'||d=='none')d=0;if(!d)d=c.getAttribute('align');return d;};})();CKEDITOR.config.image_removeLinkByEmptyURL=true;

(function(){var a,b={modes:{wysiwyg:1,source:1},canUndo:false,readOnly:1,exec:function(d){var e,f=d.config,g=f.baseHref?'<base href="'+f.baseHref+'"/>':'',h=CKEDITOR.env.isCustomDomain();if(f.fullPage)e=d.getData().replace(/<head>/,'$&'+g).replace(/[^>]*(?=<\/title>)/,'$& &mdash; '+d.lang.preview);else{var i='<body ',j=d.document&&d.document.getBody();if(j){if(j.getAttribute('id'))i+='id="'+j.getAttribute('id')+'" ';if(j.getAttribute('class'))i+='class="'+j.getAttribute('class')+'" ';}i+='>';e=d.config.docType+'<html dir="'+d.config.contentsLangDirection+'">'+'<head>'+g+'<title>'+d.lang.preview+'</title>'+CKEDITOR.tools.buildStyleHtml(d.config.contentsCss)+'</head>'+i+d.getData()+'</body></html>';}var k=640,l=420,m=80;try{var n=window.screen;k=Math.round(n.width*0.8);l=Math.round(n.height*0.7);m=Math.round(n.width*0.1);}catch(r){}var o='';if(h){window._cke_htmlToLoad=e;o='javascript:void( (function(){document.open();document.domain="'+document.domain+'";'+'document.write( window.opener._cke_htmlToLoad );'+'document.close();'+'window.opener._cke_htmlToLoad = null;'+'})() )';}if(CKEDITOR.env.gecko){window._cke_htmlToLoad=e;o=a+'preview.html';}var p=window.open(o,null,'toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width='+k+',height='+l+',left='+m);if(!h&&!CKEDITOR.env.gecko){var q=p.document;q.open();q.write(e);q.close();CKEDITOR.env.webkit&&setTimeout(function(){q.body.innerHTML+='';},0);}}},c='preview';CKEDITOR.plugins.add(c,{init:function(d){a=this.path;d.addCommand(c,b);d.ui.addButton('Preview',{label:d.lang.preview,command:c});}});})();

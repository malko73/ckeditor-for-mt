CKEDITOR.plugins.add('styles',{requires:['selection'],init:function(a){a.on('contentDom',function(){a.document.setCustomData('cke_includeReadonly',!a.config.disableReadonlyStyling);});}});CKEDITOR.editor.prototype.attachStyleStateChange=function(a,b){var c=this._.styleStateChangeCallbacks;if(!c){c=this._.styleStateChangeCallbacks=[];this.on('selectionChange',function(d){for(var e=0;e<c.length;e++){var f=c[e],g=f.style.checkActive(d.data.path)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;f.fn.call(this,g);}});}c.push({style:a,fn:b});};CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;(function(){var a={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},b={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},c=/\s*(?:;\s*|$)/,d=/#\((.+?)\)/g,e=CKEDITOR.dom.walker.bookmark(0,1),f=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(H,I){var L=this;var J=H.attributes;if(J&&J.style){H.styles=CKEDITOR.tools.extend({},H.styles,E(J.style));delete J.style;}if(I){H=CKEDITOR.tools.clone(H);z(H.attributes,I);z(H.styles,I);}var K=L.element=H.element?typeof H.element=='string'?H.element.toLowerCase():H.element:'*';L.type=a[K]?CKEDITOR.STYLE_BLOCK:b[K]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE;if(typeof L.element=='object')L.type=CKEDITOR.STYLE_OBJECT;L._={definition:H};};CKEDITOR.style.prototype={apply:function(H){G.call(this,H,false);},remove:function(H){G.call(this,H,true);},applyToRange:function(H){var I=this;return(I.applyToRange=I.type==CKEDITOR.STYLE_INLINE?h:I.type==CKEDITOR.STYLE_BLOCK?l:I.type==CKEDITOR.STYLE_OBJECT?j:null).call(I,H);},removeFromRange:function(H){var I=this;return(I.removeFromRange=I.type==CKEDITOR.STYLE_INLINE?i:I.type==CKEDITOR.STYLE_BLOCK?m:I.type==CKEDITOR.STYLE_OBJECT?k:null).call(I,H);},applyToObject:function(H){y(H,this);},checkActive:function(H){var M=this;switch(M.type){case CKEDITOR.STYLE_BLOCK:return M.checkElementRemovable(H.block||H.blockLimit,true);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:var I=H.elements;for(var J=0,K;J<I.length;J++){K=I[J];if(M.type==CKEDITOR.STYLE_INLINE&&(K==H.block||K==H.blockLimit))continue;if(M.type==CKEDITOR.STYLE_OBJECT){var L=K.getName();if(!(typeof M.element=='string'?L==M.element:L in M.element))continue;}if(M.checkElementRemovable(K,true))return true;
}}return false;},checkApplicable:function(H){switch(this.type){case CKEDITOR.STYLE_INLINE:case CKEDITOR.STYLE_BLOCK:break;case CKEDITOR.STYLE_OBJECT:return H.lastElement.getAscendant(this.element,true);}return true;},checkElementMatch:function(H,I){var O=this;var J=O._.definition;if(!H||!J.ignoreReadonly&&H.isReadOnly())return false;var K,L=H.getName();if(typeof O.element=='string'?L==O.element:L in O.element){if(!I&&!H.hasAttributes())return true;K=A(J);if(K._length){for(var M in K){if(M=='_length')continue;var N=H.getAttribute(M)||'';if(M=='style'?F(K[M],D(N,false)):K[M]==N){if(!I)return true;}else if(I)return false;}if(I)return true;}else return true;}return false;},checkElementRemovable:function(H,I){if(this.checkElementMatch(H,I))return true;var J=B(this)[H.getName()];if(J){var K,L;if(!(K=J.attributes))return true;for(var M=0;M<K.length;M++){L=K[M][0];var N=H.getAttribute(L);if(N){var O=K[M][1];if(O===null||typeof O=='string'&&N==O||O.test(N))return true;}}}return false;},buildPreview:function(H){var I=this._.definition,J=[],K=I.element;if(K=='bdo')K='span';J=['<',K];var L=I.attributes;if(L)for(var M in L)J.push(' ',M,'="',L[M],'"');var N=CKEDITOR.style.getStyleText(I);if(N)J.push(' style="',N,'"');J.push('>',H||I.name,'</',K,'>');return J.join('');}};CKEDITOR.style.getStyleText=function(H){var I=H._ST;if(I)return I;I=H.styles;var J=H.attributes&&H.attributes.style||'',K='';if(J.length)J=J.replace(c,';');for(var L in I){var M=I[L],N=(L+':'+M).replace(c,';');if(M=='inherit')K+=N;else J+=N;}if(J.length)J=D(J);J+=K;return H._ST=J;};function g(H){var I,J;while(H=H.getParent()){if(H.getName()=='body')break;if(H.getAttribute('data-nostyle'))I=H;else if(!J){var K=H.getAttribute('contentEditable');if(K=='false')I=H;else if(K=='true')J=1;}}return I;};function h(H){var am=this;var I=H.document;if(H.collapsed){var J=x(am,I);H.insertNode(J);H.moveToPosition(J,CKEDITOR.POSITION_BEFORE_END);return;}var K=am.element,L=am._.definition,M,N=L.ignoreReadonly,O=N||L.includeReadonly;if(O==undefined)O=I.getCustomData('cke_includeReadonly');var P=CKEDITOR.dtd[K]||(M=true,CKEDITOR.dtd.span);H.enlarge(CKEDITOR.ENLARGE_ELEMENT,1);H.trim();var Q=H.createBookmark(),R=Q.startNode,S=Q.endNode,T=R,U;if(!N){var V=g(R),W=g(S);if(V)T=V.getNextSourceNode(true);if(W)S=W;}if(T.getPosition(S)==CKEDITOR.POSITION_FOLLOWING)T=0;while(T){var X=false;if(T.equals(S)){T=null;X=true;}else{var Y=T.type,Z=Y==CKEDITOR.NODE_ELEMENT?T.getName():null,aa=Z&&T.getAttribute('contentEditable')=='false',ab=Z&&T.getAttribute('data-nostyle');
if(Z&&T.data('cke-bookmark')){T=T.getNextSourceNode(true);continue;}if(!Z||P[Z]&&!ab&&(!aa||O)&&(T.getPosition(S)|CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED)==CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED&&(!L.childRule||L.childRule(T))){var ac=T.getParent();if(ac&&((ac.getDtd()||CKEDITOR.dtd.span)[K]||M)&&(!L.parentRule||L.parentRule(ac))){if(!U&&(!Z||!CKEDITOR.dtd.$removeEmpty[Z]||(T.getPosition(S)|CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED)==CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED)){U=new CKEDITOR.dom.range(I);U.setStartBefore(T);}if(Y==CKEDITOR.NODE_TEXT||aa||Y==CKEDITOR.NODE_ELEMENT&&!T.getChildCount()){var ad=T,ae;while((X=!ad.getNext(e))&&(ae=ad.getParent(),P[ae.getName()])&&(ae.getPosition(R)|CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED)==CKEDITOR.POSITION_FOLLOWING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED&&(!L.childRule||L.childRule(ae)))ad=ae;U.setEndAfter(ad);}}else X=true;}else X=true;T=T.getNextSourceNode(ab||aa);}if(X&&U&&!U.collapsed){var af=x(am,I),ag=af.hasAttributes(),ah=U.getCommonAncestor(),ai={styles:{},attrs:{},blockedStyles:{},blockedAttrs:{}},aj,ak,al;while(af&&ah){if(ah.getName()==K){for(aj in L.attributes){if(ai.blockedAttrs[aj]||!(al=ah.getAttribute(ak)))continue;if(af.getAttribute(aj)==al)ai.attrs[aj]=1;else ai.blockedAttrs[aj]=1;}for(ak in L.styles){if(ai.blockedStyles[ak]||!(al=ah.getStyle(ak)))continue;if(af.getStyle(ak)==al)ai.styles[ak]=1;else ai.blockedStyles[ak]=1;}}ah=ah.getParent();}for(aj in ai.attrs)af.removeAttribute(aj);for(ak in ai.styles)af.removeStyle(ak);if(ag&&!af.hasAttributes())af=null;if(af){U.extractContents().appendTo(af);u(am,af);U.insertNode(af);af.mergeSiblings();if(!CKEDITOR.env.ie)af.$.normalize();}else{af=new CKEDITOR.dom.element('span');U.extractContents().appendTo(af);U.insertNode(af);u(am,af);af.remove(true);}U=null;}}H.moveToBookmark(Q);H.shrink(CKEDITOR.SHRINK_TEXT);};function i(H){H.enlarge(CKEDITOR.ENLARGE_ELEMENT,1);var I=H.createBookmark(),J=I.startNode;if(H.collapsed){var K=new CKEDITOR.dom.elementPath(J.getParent()),L;for(var M=0,N;M<K.elements.length&&(N=K.elements[M]);M++){if(N==K.block||N==K.blockLimit)break;if(this.checkElementRemovable(N)){var O;if(H.collapsed&&(H.checkBoundaryOfElement(N,CKEDITOR.END)||(O=H.checkBoundaryOfElement(N,CKEDITOR.START)))){L=N;
L.match=O?'start':'end';}else{N.mergeSiblings();if(N.getName()==this.element)t(this,N);else v(N,B(this)[N.getName()]);}}}if(L){var P=J;for(M=0;true;M++){var Q=K.elements[M];if(Q.equals(L))break;else if(Q.match)continue;else Q=Q.clone();Q.append(P);P=Q;}P[L.match=='start'?'insertBefore':'insertAfter'](L);}}else{var R=I.endNode,S=this;function T(){var W=new CKEDITOR.dom.elementPath(J.getParent()),X=new CKEDITOR.dom.elementPath(R.getParent()),Y=null,Z=null;for(var aa=0;aa<W.elements.length;aa++){var ab=W.elements[aa];if(ab==W.block||ab==W.blockLimit)break;if(S.checkElementRemovable(ab))Y=ab;}for(aa=0;aa<X.elements.length;aa++){ab=X.elements[aa];if(ab==X.block||ab==X.blockLimit)break;if(S.checkElementRemovable(ab))Z=ab;}if(Z)R.breakParent(Z);if(Y)J.breakParent(Y);};T();var U=J;while(!U.equals(R)){var V=U.getNextSourceNode();if(U.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(U)){if(U.getName()==this.element)t(this,U);else v(U,B(this)[U.getName()]);if(V.type==CKEDITOR.NODE_ELEMENT&&V.contains(J)){T();V=J.getNext();}}U=V;}}H.moveToBookmark(I);};function j(H){var I=H.getCommonAncestor(true,true),J=I.getAscendant(this.element,true);J&&!J.isReadOnly()&&y(J,this);};function k(H){var I=H.getCommonAncestor(true,true),J=I.getAscendant(this.element,true);if(!J)return;var K=this,L=K._.definition,M=L.attributes;if(M)for(var N in M)J.removeAttribute(N,M[N]);if(L.styles)for(var O in L.styles){if(!L.styles.hasOwnProperty(O))continue;J.removeStyle(O);}};function l(H){var I=H.createBookmark(true),J=H.createIterator();J.enforceRealBlocks=true;if(this._.enterMode)J.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;var K,L=H.document,M;while(K=J.getNextParagraph()){if(!K.isReadOnly()){var N=x(this,L,K);n(K,N);}}H.moveToBookmark(I);};function m(H){var M=this;var I=H.createBookmark(1),J=H.createIterator();J.enforceRealBlocks=true;J.enlargeBr=M._.enterMode!=CKEDITOR.ENTER_BR;var K;while(K=J.getNextParagraph()){if(M.checkElementRemovable(K))if(K.is('pre')){var L=M._.enterMode==CKEDITOR.ENTER_BR?null:H.document.createElement(M._.enterMode==CKEDITOR.ENTER_P?'p':'div');L&&K.copyAttributes(L);n(K,L);}else t(M,K,1);}H.moveToBookmark(I);};function n(H,I){var J=!I;if(J){I=H.getDocument().createElement('div');H.copyAttributes(I);}var K=I&&I.is('pre'),L=H.is('pre'),M=K&&!L,N=!K&&L;if(M)I=s(H,I);else if(N)I=r(J?[H.getHtml()]:p(H),I);else H.moveChildren(I);I.replace(H);if(K)o(I);else if(J)w(I);};function o(H){var I;if(!((I=H.getPrevious(f))&&I.is&&I.is('pre')))return;var J=q(I.getHtml(),/\n$/,'')+'\n\n'+q(H.getHtml(),/^\n/,'');
if(CKEDITOR.env.ie)H.$.outerHTML='<pre>'+J+'</pre>';else H.setHtml(J);I.remove();};function p(H){var I=/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,J=H.getName(),K=q(H.getOuterHtml(),I,function(M,N,O){return N+'</pre>'+O+'<pre>';}),L=[];K.replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(M,N){L.push(N);});return L;};function q(H,I,J){var K='',L='';H=H.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(M,N,O){N&&(K=N);O&&(L=O);return '';});return K+H.replace(I,J)+L;};function r(H,I){var J;if(H.length>1)J=new CKEDITOR.dom.documentFragment(I.getDocument());for(var K=0;K<H.length;K++){var L=H[K];L=L.replace(/(\r\n|\r)/g,'\n');L=q(L,/^[ \t]*\n/,'');L=q(L,/\n$/,'');L=q(L,/^[ \t]+|[ \t]+$/g,function(N,O,P){if(N.length==1)return '&nbsp;';else if(!O)return CKEDITOR.tools.repeat('&nbsp;',N.length-1)+' ';else return ' '+CKEDITOR.tools.repeat('&nbsp;',N.length-1);});L=L.replace(/\n/g,'<br>');L=L.replace(/[ \t]{2,}/g,function(N){return CKEDITOR.tools.repeat('&nbsp;',N.length-1)+' ';});if(J){var M=I.clone();M.setHtml(L);J.append(M);}else I.setHtml(L);}return J||I;};function s(H,I){var J=H.getBogus();J&&J.remove();var K=H.getHtml();K=q(K,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,'');K=K.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,'$1');K=K.replace(/([ \t\n\r]+|&nbsp;)/g,' ');K=K.replace(/<br\b[^>]*>/gi,'\n');if(CKEDITOR.env.ie){var L=H.getDocument().createElement('div');L.append(I);I.$.outerHTML='<pre>'+K+'</pre>';I.copyAttributes(L.getFirst());I=L.getFirst().remove();}else I.setHtml(K);return I;};function t(H,I){var J=H._.definition,K=J.attributes,L=J.styles,M=B(H)[I.getName()],N=CKEDITOR.tools.isEmpty(K)&&CKEDITOR.tools.isEmpty(L);for(var O in K){if((O=='class'||H._.definition.fullMatch)&&I.getAttribute(O)!=C(O,K[O]))continue;N=I.hasAttribute(O);I.removeAttribute(O);}for(var P in L){if(H._.definition.fullMatch&&I.getStyle(P)!=C(P,L[P],true))continue;N=N||!!I.getStyle(P);I.removeStyle(P);}v(I,M,a[I.getName()]);if(N)!CKEDITOR.dtd.$block[I.getName()]||H._.enterMode==CKEDITOR.ENTER_BR&&!I.hasAttributes()?w(I):I.renameNode(H._.enterMode==CKEDITOR.ENTER_P?'p':'div');};function u(H,I){var J=H._.definition,K=J.attributes,L=J.styles,M=B(H),N=I.getElementsByTag(H.element);for(var O=N.count();--O>=0;)t(H,N.getItem(O));for(var P in M){if(P!=H.element){N=I.getElementsByTag(P);for(O=N.count()-1;O>=0;O--){var Q=N.getItem(O);v(Q,M[P]);}}}};function v(H,I,J){var K=I&&I.attributes;if(K)for(var L=0;L<K.length;L++){var M=K[L][0],N;
if(N=H.getAttribute(M)){var O=K[L][1];if(O===null||O.test&&O.test(N)||typeof O=='string'&&N==O)H.removeAttribute(M);}}if(!J)w(H);};function w(H){if(!H.hasAttributes())if(CKEDITOR.dtd.$block[H.getName()]){var I=H.getPrevious(f),J=H.getNext(f);if(I&&(I.type==CKEDITOR.NODE_TEXT||!I.isBlockBoundary({br:1})))H.append('br',1);if(J&&(J.type==CKEDITOR.NODE_TEXT||!J.isBlockBoundary({br:1})))H.append('br');H.remove(true);}else{var K=H.getFirst(),L=H.getLast();H.remove(true);if(K){K.type==CKEDITOR.NODE_ELEMENT&&K.mergeSiblings();if(L&&!K.equals(L)&&L.type==CKEDITOR.NODE_ELEMENT)L.mergeSiblings();}}};function x(H,I,J){var K,L=H._.definition,M=H.element;if(M=='*')M='span';K=new CKEDITOR.dom.element(M,I);if(J)J.copyAttributes(K);K=y(K,H);if(I.getCustomData('doc_processing_style')&&K.hasAttribute('id'))K.removeAttribute('id');else I.setCustomData('doc_processing_style',1);return K;};function y(H,I){var J=I._.definition,K=J.attributes,L=CKEDITOR.style.getStyleText(J);if(K)for(var M in K)H.setAttribute(M,K[M]);if(L)H.setAttribute('style',L);return H;};function z(H,I){for(var J in H)H[J]=H[J].replace(d,function(K,L){return I[L];});};function A(H){var I=H._AC;if(I)return I;I={};var J=0,K=H.attributes;if(K)for(var L in K){J++;I[L]=K[L];}var M=CKEDITOR.style.getStyleText(H);if(M){if(!I.style)J++;I.style=M;}I._length=J;return H._AC=I;};function B(H){if(H._.overrides)return H._.overrides;var I=H._.overrides={},J=H._.definition.overrides;if(J){if(!CKEDITOR.tools.isArray(J))J=[J];for(var K=0;K<J.length;K++){var L=J[K],M,N,O;if(typeof L=='string')M=L.toLowerCase();else{M=L.element?L.element.toLowerCase():H.element;O=L.attributes;}N=I[M]||(I[M]={});if(O){var P=N.attributes=N.attributes||[];for(var Q in O)P.push([Q.toLowerCase(),O[Q]]);}}}return I;};function C(H,I,J){var K=new CKEDITOR.dom.element('span');K[J?'setStyle':'setAttribute'](H,I);return K[J?'getStyle':'getAttribute'](H);};function D(H,I){var J;if(I!==false){var K=new CKEDITOR.dom.element('span');K.setAttribute('style',H);J=K.getAttribute('style')||'';}else J=H;J=J.replace(/(font-family:)(.*?)(?=;|$)/,function(L,M,N){var O=N.split(',');for(var P=0;P<O.length;P++)O[P]=CKEDITOR.tools.trim(O[P].replace(/["']/g,''));return M+O.join(',');});return J.replace(/\s*([;:])\s*/,'$1').replace(/([^\s;])$/,'$1;').replace(/,\s+/g,',').replace(/\"/g,'').toLowerCase();};function E(H){var I={};H.replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(J,K,L){I[K]=L;});return I;};function F(H,I){typeof H=='string'&&(H=E(H));
typeof I=='string'&&(I=E(I));for(var J in H){if(!(J in I&&(I[J]==H[J]||H[J]=='inherit'||I[J]=='inherit')))return false;}return true;};function G(H,I){var J=H.getSelection(),K=J.createBookmarks(1),L=J.getRanges(),M=I?this.removeFromRange:this.applyToRange,N,O=L.createIterator();while(N=O.getNextRange())M.call(this,N);if(K.length==1&&K[0].collapsed){J.selectRanges(L);H.getById(K[0].startNode).remove();}else J.selectBookmarks(K);H.removeCustomData('doc_processing_style');};})();CKEDITOR.styleCommand=function(a){this.style=a;};CKEDITOR.styleCommand.prototype.exec=function(a){var c=this;a.focus();var b=a.document;if(b)if(c.state==CKEDITOR.TRISTATE_OFF)c.style.apply(b);else if(c.state==CKEDITOR.TRISTATE_ON)c.style.remove(b);return!!b;};CKEDITOR.stylesSet=new CKEDITOR.resourceManager('','stylesSet');CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(a,b,c){CKEDITOR.stylesSet.addExternal(a,b,'');CKEDITOR.stylesSet.load(a,c);};CKEDITOR.editor.prototype.getStylesSet=function(a){if(!this._.stylesDefinitions){var b=this,c=b.config.stylesCombo_stylesSet||b.config.stylesSet||'default';if(c instanceof Array){b._.stylesDefinitions=c;a(c);return;}var d=c.split(':'),e=d[0],f=d[1],g=CKEDITOR.plugins.registered.styles.path;CKEDITOR.stylesSet.addExternal(e,f?d.slice(1).join(':'):g+'styles/'+e+'.js','');CKEDITOR.stylesSet.load(e,function(h){b._.stylesDefinitions=h[e];a(b._.stylesDefinitions);});}else a(this._.stylesDefinitions);};

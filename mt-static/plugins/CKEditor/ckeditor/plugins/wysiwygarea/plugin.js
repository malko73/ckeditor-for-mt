(function(){var a=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,b=CKEDITOR.dom.walker.whitespaces(true),c=CKEDITOR.dom.walker.bogus(true),d=function(s){return b(s)&&c(s);};function e(s){return s.isBlockBoundary()&&CKEDITOR.dtd.$empty[s.getName()];};function f(s){return function(t){if(this.mode=='wysiwyg'){this.focus();var u=this.getSelection(),v=u.isLocked;v&&u.unlock();this.fire('saveSnapshot');s.call(this,t.data);v&&this.getSelection().lock();var w=this;setTimeout(function(){try{w.fire('saveSnapshot');}catch(x){setTimeout(function(){w.fire('saveSnapshot');},200);}},0);}};};function g(s){var B=this;if(B.dataProcessor)s=B.dataProcessor.toHtml(s);if(!s)return;var t=B.getSelection(),u=t.getRanges()[0];if(u.checkReadOnly())return;if(CKEDITOR.env.opera){var v=new CKEDITOR.dom.elementPath(u.startContainer);if(v.block){var w=CKEDITOR.htmlParser.fragment.fromHtml(s,false).children;for(var x=0,y=w.length;x<y;x++){if(w[x]._.isBlockLike){u.splitBlock(B.enterMode==CKEDITOR.ENTER_DIV?'div':'p');u.insertNode(u.document.createText(''));u.select();break;}}}}if(CKEDITOR.env.ie){var z=t.getNative();if(z.type=='Control')z.clear();else if(t.getType()==CKEDITOR.SELECTION_TEXT){u=t.getRanges()[0];var A=u&&u.endContainer;if(A&&A.type==CKEDITOR.NODE_ELEMENT&&A.getAttribute('contenteditable')=='false'&&u.checkBoundaryOfElement(A,CKEDITOR.END)){u.setEndAfter(u.endContainer);u.deleteContents();}}z.createRange().pasteHTML(s);}else B.document.$.execCommand('inserthtml',false,s);if(CKEDITOR.env.webkit){t=B.getSelection();t.scrollIntoView();}};function h(s){var t=this.getSelection(),u=t.getStartElement().hasAscendant('pre',true)?CKEDITOR.ENTER_BR:this.config.enterMode,v=u==CKEDITOR.ENTER_BR,w=CKEDITOR.tools.htmlEncode(s.replace(/\r\n|\r/g,'\n'));w=w.replace(/^[ \t]+|[ \t]+$/g,function(C,D,E){if(C.length==1)return '&nbsp;';else if(!D)return CKEDITOR.tools.repeat('&nbsp;',C.length-1)+' ';else return ' '+CKEDITOR.tools.repeat('&nbsp;',C.length-1);});w=w.replace(/[ \t]{2,}/g,function(C){return CKEDITOR.tools.repeat('&nbsp;',C.length-1)+' ';});var x=u==CKEDITOR.ENTER_P?'p':'div';if(!v)w=w.replace(/(\n{2})([\s\S]*?)(?:$|\1)/g,function(C,D,E){return '<'+x+'>'+E+'</'+x+'>';});w=w.replace(/\n/g,'<br>');if(!(v||CKEDITOR.env.ie))w=w.replace(new RegExp('<br>(?=</'+x+'>)'),function(C){return CKEDITOR.tools.repeat(C,2);});if(CKEDITOR.env.gecko||CKEDITOR.env.webkit){var y=new CKEDITOR.dom.elementPath(t.getStartElement()),z=[];
for(var A=0;A<y.elements.length;A++){var B=y.elements[A].getName();if(B in CKEDITOR.dtd.$inline)z.unshift(y.elements[A].getOuterHtml().match(/^<.*?>/));else if(B in CKEDITOR.dtd.$block)break;}w=z.join('')+w;}g.call(this,w);};function i(s){var t=this.getSelection(),u=t.getRanges(),v=s.getName(),w=CKEDITOR.dtd.$block[v],x=t.isLocked;if(x)t.unlock();var y,z,A,B;for(var C=u.length-1;C>=0;C--){y=u[C];if(!y.checkReadOnly()){y.deleteContents(1);z=!C&&s||s.clone(1);var D,E;if(w)while((D=y.getCommonAncestor(0,1))&&(E=CKEDITOR.dtd[D.getName()])&&!(E&&E[v])){if(D.getName() in CKEDITOR.dtd.span)y.splitElement(D);else if(y.checkStartOfBlock()&&y.checkEndOfBlock()){y.setStartBefore(D);y.collapse(true);D.remove();}else y.splitBlock();}y.insertNode(z);if(!A)A=z;}}if(A){y.moveToPosition(A,CKEDITOR.POSITION_AFTER_END);if(w){var F=A.getNext(d),G=F&&F.type==CKEDITOR.NODE_ELEMENT&&F.getName();if(G&&CKEDITOR.dtd.$block[G]){if(CKEDITOR.dtd[G]['#'])y.moveToElementEditStart(F);else y.moveToElementEditEnd(A);}else if(!F){F=y.fixBlock(true,this.config.enterMode==CKEDITOR.ENTER_DIV?'div':'p');y.moveToElementEditStart(F);}}}t.selectRanges([y]);if(x)this.getSelection().lock();};function j(s){if(!s.checkDirty())setTimeout(function(){s.resetDirty();},0);};var k=CKEDITOR.dom.walker.whitespaces(true),l=CKEDITOR.dom.walker.bookmark(false,true);function m(s){return k(s)&&l(s);};function n(s){return s.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(s.getText()).match(/^(?:&nbsp;|\xa0)$/);};function o(s){if(s.isLocked){s.unlock();setTimeout(function(){s.lock();},0);}};function p(s){return s.getOuterHtml().match(a);};k=CKEDITOR.dom.walker.whitespaces(true);function q(s){var t=s.window,u=s.document,v=s.document.getBody(),w=v.getFirst(),x=v.getChildren().count();if(!x||x==1&&w.type==CKEDITOR.NODE_ELEMENT&&w.hasAttribute('_moz_editor_bogus_node')){j(s);var y=s.element.getDocument(),z=y.getDocumentElement(),A=z.$.scrollTop,B=z.$.scrollLeft,C=u.$.createEvent('KeyEvents');C.initKeyEvent('keypress',true,true,t.$,false,false,false,false,0,32);u.$.dispatchEvent(C);if(A!=z.$.scrollTop||B!=z.$.scrollLeft)y.getWindow().$.scrollTo(B,A);x&&v.getFirst().remove();u.getBody().appendBogus();var D=new CKEDITOR.dom.range(u);D.setStartAt(v,CKEDITOR.POSITION_AFTER_START);D.select();}};function r(s){var t=s.editor,u=s.data.path,v=u.blockLimit,w=s.data.selection,x=w.getRanges()[0],y=t.document.getBody(),z=t.config.enterMode;if(CKEDITOR.env.gecko){var A=u.block||u.blockLimit,B=A&&A.getLast(m);if(A&&A.isBlockBoundary()&&!(B&&B.type==CKEDITOR.NODE_ELEMENT&&B.isBlockBoundary())&&!A.is('pre')&&!A.getBogus())A.appendBogus();
}if(t.config.autoParagraph!==false&&z!=CKEDITOR.ENTER_BR&&x.collapsed&&v.getName()=='body'&&!u.block){var C=x.fixBlock(true,t.config.enterMode==CKEDITOR.ENTER_DIV?'div':'p');if(CKEDITOR.env.ie){var D=C.getFirst(m);D&&n(D)&&D.remove();}if(p(C)){var E=C.getNext(k);if(E&&E.type==CKEDITOR.NODE_ELEMENT&&!e(E)){x.moveToElementEditStart(E);C.remove();}else{E=C.getPrevious(k);if(E&&E.type==CKEDITOR.NODE_ELEMENT&&!e(E)){x.moveToElementEditEnd(E);C.remove();}}}x.select();s.cancel();}var F=new CKEDITOR.dom.range(t.document);F.moveToElementEditEnd(t.document.getBody());var G=new CKEDITOR.dom.elementPath(F.startContainer);if(!G.blockLimit.is('body')){var H;if(z!=CKEDITOR.ENTER_BR)H=y.append(t.document.createElement(z==CKEDITOR.ENTER_P?'p':'div'));else H=y;if(!CKEDITOR.env.ie)H.appendBogus();}};CKEDITOR.plugins.add('wysiwygarea',{requires:['editingblock'],init:function(s){var t=s.config.enterMode!=CKEDITOR.ENTER_BR&&s.config.autoParagraph!==false?s.config.enterMode==CKEDITOR.ENTER_DIV?'div':'p':false,u=s.lang.editorTitle.replace('%1',s.name),v=s.lang.editorHelp;if(CKEDITOR.env.ie)u+=', '+v;var w=CKEDITOR.document.getWindow(),x;s.on('editingBlockReady',function(){var A,B,C,D,E,F,G,H=CKEDITOR.env.isCustomDomain(),I=function(L){if(B)B.remove();var M='document.open();'+(H?'document.domain="'+document.domain+'";':'')+'document.close();';M=CKEDITOR.env.air?'javascript:void(0)':CKEDITOR.env.ie?'javascript:void(function(){'+encodeURIComponent(M)+'}())':'';var N=CKEDITOR.tools.getNextId();B=CKEDITOR.dom.element.createFromHtml('<iframe style="width:100%;height:100%" frameBorder="0" aria-describedby="'+N+'"'+' title="'+u+'"'+' src="'+M+'"'+' tabIndex="'+(CKEDITOR.env.webkit?-1:s.tabIndex)+'"'+' allowTransparency="true"'+'></iframe>');if(document.location.protocol=='chrome:')CKEDITOR.event.useCapture=true;B.on('load',function(O){E=1;O.removeListener();var P=B.getFrameDocument();P.write(L);CKEDITOR.env.air&&K(P.getWindow().$);});if(document.location.protocol=='chrome:')CKEDITOR.event.useCapture=false;A.append(CKEDITOR.dom.element.createFromHtml('<span id="'+N+'" class="cke_voice_label">'+v+'</span>'));A.append(B);if(CKEDITOR.env.webkit){G=function(){A.setStyle('width','100%');B.hide();B.setSize('width',A.getSize('width'));A.removeStyle('width');B.show();};w.on('resize',G);}};x=CKEDITOR.tools.addFunction(K);var J='<script id="cke_actscrpt" type="text/javascript" data-cke-temp="1">'+(H?'document.domain="'+document.domain+'";':'')+'window.parent.CKEDITOR.tools.callFunction( '+x+', window );'+'</script>';
function K(L){if(!E)return;E=0;s.fire('ariaWidget',B);var M=L.document,N=M.body,O=M.getElementById('cke_actscrpt');O&&O.parentNode.removeChild(O);N.spellcheck=!s.config.disableNativeSpellChecker;var P=!s.readOnly;if(CKEDITOR.env.ie){N.hideFocus=true;N.disabled=true;N.contentEditable=P;N.removeAttribute('disabled');}else setTimeout(function(){if(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900||CKEDITOR.env.opera)M.$.body.contentEditable=P;else if(CKEDITOR.env.webkit)M.$.body.parentNode.contentEditable=P;else M.$.designMode=P?'off':'on';},0);P&&CKEDITOR.env.gecko&&CKEDITOR.tools.setTimeout(q,0,null,s);L=s.window=new CKEDITOR.dom.window(L);M=s.document=new CKEDITOR.dom.document(M);P&&M.on('dblclick',function(U){var V=U.data.getTarget(),W={element:V,dialog:''};s.fire('doubleclick',W);W.dialog&&s.openDialog(W.dialog);});CKEDITOR.env.ie&&M.on('click',function(U){var V=U.data.getTarget();if(V.is('input')){var W=V.getAttribute('type');if(W=='submit'||W=='reset')U.data.preventDefault();}});if(!(CKEDITOR.env.ie||CKEDITOR.env.opera))M.on('mousedown',function(U){var V=U.data.getTarget();if(V.is('img','hr','input','textarea','select'))s.getSelection().selectElement(V);});if(CKEDITOR.env.gecko)M.on('mouseup',function(U){if(U.data.$.button==2){var V=U.data.getTarget();if(!V.getOuterHtml().replace(a,'')){var W=new CKEDITOR.dom.range(M);W.moveToElementEditStart(V);W.select(true);}}});M.on('click',function(U){U=U.data;if(U.getTarget().is('a')&&U.$.button!=2)U.preventDefault();});if(CKEDITOR.env.webkit){M.on('mousedown',function(){R=1;});M.on('click',function(U){if(U.data.getTarget().is('input','select'))U.data.preventDefault();});M.on('mouseup',function(U){if(U.data.getTarget().is('input','textarea'))U.data.preventDefault();});}var Q=CKEDITOR.env.ie?B:L;Q.on('blur',function(){s.focusManager.blur();});var R;Q.on('focus',function(){var U=s.document;if(CKEDITOR.env.gecko||CKEDITOR.env.opera)U.getBody().focus();else if(CKEDITOR.env.webkit)if(!R){s.document.getDocumentElement().focus();R=1;}s.focusManager.focus();});var S=s.keystrokeHandler;S.blockedKeystrokes[8]=!P;S.attach(M);M.getDocumentElement().addClass(M.$.compatMode);s.on('key',function(U){if(s.mode!='wysiwyg')return;var V=U.data.keyCode;if(V in {8:1,46:1}){var W=s.getSelection(),X=W.getSelectedElement(),Y=W.getRanges()[0],Z=new CKEDITOR.dom.elementPath(Y.startContainer),aa,ab,ac,ad=V==8;if(X){s.fire('saveSnapshot');Y.moveToPosition(X,CKEDITOR.POSITION_BEFORE_START);X.remove();Y.select();s.fire('saveSnapshot');U.cancel();
}else if(Y.collapsed)if((aa=Z.block)&&Y[ad?'checkStartOfBlock':'checkEndOfBlock']()&&(ac=aa[ad?'getPrevious':'getNext'](b))&&ac.is('table')){s.fire('saveSnapshot');if(Y[ad?'checkEndOfBlock':'checkStartOfBlock']())aa.remove();Y['moveToElementEdit'+(ad?'End':'Start')](ac);Y.select();s.fire('saveSnapshot');U.cancel();}else if(Z.blockLimit.is('td')&&(ab=Z.blockLimit.getAscendant('table'))&&Y.checkBoundaryOfElement(ab,ad?CKEDITOR.START:CKEDITOR.END)&&(ac=ab[ad?'getPrevious':'getNext'](b))){s.fire('saveSnapshot');Y['moveToElementEdit'+(ad?'End':'Start')](ac);if(Y.checkStartOfBlock()&&Y.checkEndOfBlock())ac.remove();else Y.select();s.fire('saveSnapshot');U.cancel();}}if(V==33||V==34)if(CKEDITOR.env.gecko){var ae=M.getBody();if(L.$.innerHeight>ae.$.offsetHeight){Y=new CKEDITOR.dom.range(M);Y[V==33?'moveToElementEditStart':'moveToElementEditEnd'](ae);Y.select();U.cancel();}}});if(CKEDITOR.env.ie&&M.$.compatMode=='CSS1Compat'){var T={33:1,34:1};M.on('keydown',function(U){if(U.data.getKeystroke() in T)setTimeout(function(){s.getSelection().scrollIntoView();},0);});}if(CKEDITOR.env.ie&&s.config.enterMode!=CKEDITOR.ENTER_P)M.on('selectionchange',function(){var U=M.getBody(),V=s.getSelection(),W=V&&V.getRanges()[0];if(W&&U.getHtml().match(/^<p>&nbsp;<\/p>$/i)&&W.startContainer.equals(U))setTimeout(function(){W=s.getSelection().getRanges()[0];if(!W.startContainer.equals('body')){U.getFirst().remove(1);W.moveToElementEditEnd(U);W.select(1);}},0);});if(s.contextMenu)s.contextMenu.addTarget(M,s.config.browserContextMenuOnCtrl!==false);setTimeout(function(){s.fire('contentDom');if(F){s.mode='wysiwyg';s.fire('mode',{previousMode:s._.previousMode});F=false;}C=false;if(D){s.focus();D=false;}setTimeout(function(){s.fire('dataReady');},0);try{s.document.$.execCommand('2D-position',false,true);}catch(U){}try{s.document.$.execCommand('enableInlineTableEditing',false,!s.config.disableNativeTableHandles);}catch(V){}if(s.config.disableObjectResizing)try{s.document.$.execCommand('enableObjectResizing',false,false);}catch(W){s.document.getBody().on(CKEDITOR.env.ie?'resizestart':'resize',function(X){X.data.preventDefault();});}if(CKEDITOR.env.ie)setTimeout(function(){if(s.document){var X=s.document.$.body;X.runtimeStyle.marginBottom='0px';X.runtimeStyle.marginBottom='';}},1000);},0);};s.addMode('wysiwyg',{load:function(L,M,N){A=L;if(CKEDITOR.env.ie&&CKEDITOR.env.quirks)L.setStyle('position','relative');s.mayBeDirty=true;F=true;if(N)this.loadSnapshotData(M);else this.loadData(M);},loadData:function(L){C=true;
s._.dataStore={id:1};var M=s.config,N=M.fullPage,O=M.docType,P='<style type="text/css" data-cke-temp="1">'+s._.styles.join('\n')+'</style>';!N&&(P=CKEDITOR.tools.buildStyleHtml(s.config.contentsCss)+P);var Q=M.baseHref?'<base href="'+M.baseHref+'" data-cke-temp="1" />':'';if(N)L=L.replace(/<!DOCTYPE[^>]*>/i,function(R){s.docType=O=R;return '';}).replace(/<\?xml\s[^\?]*\?>/i,function(R){s.xmlDeclaration=R;return '';});if(s.dataProcessor)L=s.dataProcessor.toHtml(L,t);if(N){if(!/<body[\s|>]/.test(L))L='<body>'+L;if(!/<html[\s|>]/.test(L))L='<html>'+L+'</html>';if(!/<head[\s|>]/.test(L))L=L.replace(/<html[^>]*>/,'$&<head><title></title></head>');else if(!/<title[\s|>]/.test(L))L=L.replace(/<head[^>]*>/,'$&<title></title>');Q&&(L=L.replace(/<head>/,'$&'+Q));L=L.replace(/<\/head\s*>/,P+'$&');L=O+L;}else L=M.docType+'<html dir="'+M.contentsLangDirection+'"'+' lang="'+(M.contentsLanguage||s.langCode)+'">'+'<head>'+'<title>'+u+'</title>'+Q+P+'</head>'+'<body'+(M.bodyId?' id="'+M.bodyId+'"':'')+(M.bodyClass?' class="'+M.bodyClass+'"':'')+'>'+L+'</html>';if(CKEDITOR.env.gecko)L=L.replace(/<br \/>(?=\s*<\/(:?html|body)>)/,'$&<br type="_moz" />');L+=J;this.onDispose();I(L);},getData:function(){var L=s.config,M=L.fullPage,N=M&&s.docType,O=M&&s.xmlDeclaration,P=B.getFrameDocument(),Q=M?P.getDocumentElement().getOuterHtml():P.getBody().getHtml();if(CKEDITOR.env.gecko)Q=Q.replace(/<br>(?=\s*(:?$|<\/body>))/,'');if(s.dataProcessor)Q=s.dataProcessor.toDataFormat(Q,t);if(L.ignoreEmptyParagraph)Q=Q.replace(a,function(R,S){return S;});if(O)Q=O+'\n'+Q;if(N)Q=N+'\n'+Q;return Q;},getSnapshotData:function(){return B.getFrameDocument().getBody().getHtml();},loadSnapshotData:function(L){B.getFrameDocument().getBody().setHtml(L);},onDispose:function(){if(!s.document)return;s.document.getDocumentElement().clearCustomData();s.document.getBody().clearCustomData();s.window.clearCustomData();s.document.clearCustomData();B.clearCustomData();B.remove();},unload:function(L){this.onDispose();if(G)w.removeListener('resize',G);s.window=s.document=B=A=D=null;s.fire('contentDomUnload');},focus:function(){var L=s.window;if(C)D=true;else if(L){var M=s.getSelection(),N=M&&M.getNative();if(N&&N.type=='Control')return;CKEDITOR.env.air?setTimeout(function(){L.focus();},0):L.focus();s.selectionChange();}}});s.on('insertHtml',f(g),null,null,20);s.on('insertElement',f(i),null,null,20);s.on('insertText',f(h),null,null,20);s.on('selectionChange',function(L){if(s.readOnly)return;var M=s.getSelection();if(M&&!M.isLocked){var N=s.checkDirty();
s.fire('saveSnapshot',{contentOnly:1});r.call(this,L);s.fire('updateSnapshot');!N&&s.resetDirty();}},null,null,1);});s.on('contentDom',function(){var A=s.document.getElementsByTag('title').getItem(0);A.data('cke-title',s.document.$.title);CKEDITOR.env.ie&&(s.document.$.title=u);});s.on('readOnly',function(){if(s.mode=='wysiwyg'){var A=s.getMode();A.loadData(A.getData());}});if(CKEDITOR.document.$.documentMode>=8){s.addCss('html.CSS1Compat [contenteditable=false]{ min-height:0 !important;}');var y=[];for(var z in CKEDITOR.dtd.$removeEmpty)y.push('html.CSS1Compat '+z+'[contenteditable=false]');s.addCss(y.join(',')+'{ display:inline-block;}');}else if(CKEDITOR.env.gecko){s.addCss('html { height: 100% !important; }');s.addCss('img:-moz-broken { -moz-force-broken-image-icon : 1;\tmin-width : 24px; min-height : 24px; }');}s.addCss('html {\t_overflow-y: scroll; cursor: text;\t*cursor:auto;}');s.addCss('img, input, textarea { cursor: default;}');s.on('insertElement',function(A){var B=A.data;if(B.type==CKEDITOR.NODE_ELEMENT&&(B.is('input')||B.is('textarea'))){var C=B.getAttribute('contenteditable')=='false';if(!C){B.data('cke-editable',B.hasAttribute('contenteditable')?'true':'1');B.setAttribute('contenteditable',false);}}});}});if(CKEDITOR.env.gecko)(function(){var s=document.body;if(!s)window.addEventListener('load',arguments.callee,false);else{var t=s.getAttribute('onpageshow');s.setAttribute('onpageshow',(t?t+';':'')+'event.persisted && (function(){'+'var allInstances = CKEDITOR.instances, editor, doc;'+'for ( var i in allInstances )'+'{'+'\teditor = allInstances[ i ];'+'\tdoc = editor.document;'+'\tif ( doc )'+'\t{'+'\t\tdoc.$.designMode = "off";'+'\t\tdoc.$.designMode = "on";'+'\t}'+'}'+'})();');}})();})();CKEDITOR.config.disableObjectResizing=false;CKEDITOR.config.disableNativeTableHandles=true;CKEDITOR.config.disableNativeSpellChecker=true;CKEDITOR.config.ignoreEmptyParagraph=true;
